<form id="upload-form">
  <input type="file" id="image" required>
  <button type="submit">Načti kód</button>
</form>
<div id="result"></div>
<script>
document.getElementById('upload-form').addEventListener('submit', async function(e) {
  e.preventDefault();
  const file = document.getElementById('image').files;
  const formData = new FormData();
  formData.append('file', file);
  formData.append('language', 'eng');
  formData.append('isOverlayRequired', false);
  const resp = await fetch('https://api.ocr.space/parse/image', {
    method: 'POST',
    headers: { apikey: 'K87964261688957' }, // veřejný testovací klíč, lze získat zdarma vlastní
    body: formData
  });
  const data = await resp.json();
  const code = data.ParsedResults.ParsedText.replace(/[^A-Z0-9]/g, '').toUpperCase();
  document.getElementById('result').innerHTML = 
    `<a href="https://store.pokemongo.com/offer-redemption?passcode=${code}" target="_blank">Přejít na odměnu s kódem: ${code}</a>`;
});
</script>
